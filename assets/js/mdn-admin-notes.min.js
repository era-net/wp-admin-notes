function check_version(t){t.ajax({url:ajaxurl,method:"POST",data:{action:"update_version"}})}function mdn_save_handler(t,e){const n=e;t.ajax({url:ajaxurl,method:"POST",data:{action:"mdn_save_note",data:n},success:n=>{"success"===n.status?(t("#"+n.cancelBtn).remove(),t("#"+n.saveBtn).remove(),t("#"+e.contentId).html(n.content),t("#"+e.titleId).html(t("#"+e.titleInput).val()),t("#"+e.titleId).addClass("hndle ui-sortable-handle"),mdn_revoke_edit_listeners(t),mdn_revoke_delete_listeners(t),mdn_handle_checkboxes(t)):"large_content"===n.status&&(t("#"+e.textContentId).prop("disabled",!1),t("#"+e.titleInput).prop("disabled",!1),t("#"+e.cancelBtn).show(),t("#"+e.saveBtn).show(),alert("Content exceeded ... Max. 2500 characters"))}})}function mdn_init_edit_listeners(t){t('button[data-name="mdn-note-edit"]').each((e,n)=>{t(n).on("click",()=>{t(n).prop("disabled",!0);const e=t(n).data("note-id");mdn_handle_update_state(t,e)})}),t('div[id^="mdn_note_"]').each((e,n)=>{t(n).on("dblclick",()=>{t(n).off("dblclick");const e=n.id.split("_"),d=e[e.length-1];mdn_handle_update_state(t,d)})})}function mdn_revoke_edit_listeners(t){t('button[data-name="mdn-note-edit"]').each((e,n)=>{t(n).off("click")}),t('div[id^="mdn_note_"]').each((e,n)=>{t(n).off("dblclick")}),t('button[data-name="mdn-note-edit"]').each((e,n)=>{t(n).on("click",()=>{t("#mdn_note_"+t(n).data("note-id")).off("dblclick"),t("#mdn_note_content_"+t(n).data("note-id")).off("dblclick"),t("#mdn_note_update_text_content_"+t(n).data("note-id")).off("dblclick"),t(n).prop("disabled",!0);const e=t(n).data("note-id");mdn_handle_update_state(t,e)})}),t('div[id^="mdn_note_"]').each((e,n)=>{t(n).on("dblclick",()=>{t(n).off("dblclick");const e=n.id.split("_"),d=e[e.length-1];mdn_handle_update_state(t,d)})})}function mdn_handle_update_state(t,e){const n=t("#mdn_note_"+e);t(n).off("dblclick"),t.ajax({url:ajaxurl,method:"POST",data:{action:"mdn_update_form_content",id:e},success:e=>{t(n).html(e.html)}}),t("mdn_note_title_ipt_".noteId).on("click",t=>{t.stopPropagation()}),t("mdn_note_title_ipt_".noteId).on("dblclick",t=>{t.stopPropagation()})}function mdn_revoke_delete_listeners(t){t('button[data-name="mdn-note-delete"]').each((e,n)=>{t(n).off("click")}),mdn_init_delete_listeners(t)}function mdn_init_delete_listeners(t){t('button[data-name="mdn-note-delete"]').each((e,n)=>{t(n).on("click",()=>{t(n).prop("disabled",!0);const e=t(n).data("note-id");t("#mdn_note_"+e).find("h2:first").text();1==confirm(t(n).data("confirm-message"))?t.ajax({url:ajaxurl,method:"POST",data:{action:"mdn_delete_note",noteId:e},success:e=>{"success"===e.status?t("#mdn_note_"+t(n).data("note-id")).remove():t(n).prop("disabled",!1)}}):t(n).prop("disabled",!1)})})}function mdn_handle_checkboxes(t){t(".mdn-markdown-content ul").each((e,n)=>{t(n).find("li").children().each((t,e)=>{"INPUT"!==e.nodeName||(e.disabled=!1)})})}jQuery(document).ready(t=>{check_version(t),mdn_handle_checkboxes(t),t(document.body).on("click",".mdn-notes-add-note, #mdn-notes-add a",e=>{t.ajax({url:ajaxurl,method:"POST",data:{action:"mdn_add_new_note"},success:e=>{t("#normal-sortables").prepend(e.note),t("#"+e.textContentId).trigger("focus"),t("#"+e.textContentId).on("keydown",n=>{if(n.ctrlKey&&13==n.keyCode&&(t("#"+e.cancelBtn).hide(),t("#"+e.saveBtn).hide(),t("#"+e.textContentId).trigger("blur"),t("#"+e.textContentId).prop("disabled",!0),t("#"+e.titleInput).prop("disabled",!0),e.titleContent=t("#"+e.titleInput).val(),e.textContent=t("#"+e.textContentId).val(),delete e.note,mdn_save_handler(t,e)),9==n.keyCode||9==n.which){let t=document.getElementById(e.textContentId);n.preventDefault(),t.setRangeText("\t",t.selectionStart,t.selectionStart,"end")}}),t("#"+e.titleInput).on("keydown",n=>{n.ctrlKey&&13==n.keyCode&&(t("#"+e.cancelBtn).hide(),t("#"+e.saveBtn).hide(),t("#"+e.titleInput).trigger("blur"),t("#"+e.titleInput).prop("disabled",!0),t("#"+e.textContentId).prop("disabled",!0),e.titleContent=t("#"+e.titleInput).val(),e.textContent=t("#"+e.textContentId).val(),delete e.note,mdn_save_handler(t,e))}),t("#"+e.saveBtn).on("click",()=>{t("#"+e.cancelBtn).hide(),t("#"+e.saveBtn).hide(),t("#"+e.textContentId).prop("disabled",!0),t("#"+e.titleInput).prop("disabled",!0),e.titleContent=t("#"+e.titleInput).val(),e.textContent=t("#"+e.textContentId).val(),delete e.note,mdn_save_handler(t,e)}),t("#"+e.textContentId).on("keyup",()=>{t("#"+e.textCountId).text(t("#"+e.textContentId).val().length)}),t("#"+e.cancelBtn).on("click",()=>{t("#"+e.widgetId).remove()})}}),e.preventDefault()}),mdn_init_edit_listeners(t),mdn_init_delete_listeners(t)});